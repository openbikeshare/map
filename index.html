<html>

<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
        crossorigin="" />
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
        crossorigin=""></script>
    <style>
        body {
            padding: 0;
            margin: 0;
        }

        #mapid {
            height: 100%;
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="mapid"></div>

    <script>
        var mymap = L.map('mapid').setView([52.090031, 5.318403], 9);
        L.tileLayer('http://178.62.243.15:8080/styles/positron/{z}/{x}/{y}.png', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://openmaptiles.com/">OpenMapTiles</a>',
            maxZoom: 18
        }).addTo(mymap);


        function getCoverage() {
            fetch('http://127.0.0.1:3000/coverage')
                .then(function (response) {
                    return response.json();
                })
                .then(function (json) {
                    plotCoverage(json);
                });


        }

        function plotCoverage(json) {
            var myStyle = {
                "stroke": false,
                "fillColor": "#ff7800",
                "weight": 5,
                "opacity": 0.65
            };

            L.geoJSON(json, {
                style: myStyle
            }).addTo(mymap);
        }

        getCoverage();




    </script>
</body>

</html>